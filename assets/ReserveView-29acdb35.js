import{_ as b,o as r,c as i,b as t,F as _,g,h as m,t as h,i as v,v as P,f}from"./index-28424134.js";const{VITE_APP_URL:d,VITE_APP_PATH:l}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"shangway",BASE_URL:"/basketball-sideProject/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},$={data(){return{products:[],productId:"",cart:{},loadingItem:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getProducts(){this.$http.get(`${d}/v2/api/${l}/products/all`).then(e=>{console.log("產品列表",e.data.products),this.products=e.data.products})},openModal(e){this.productId=e,console.log("外層帶入 productId",e)},addToCard(e,o=1){const n={product_id:e,qty:o};this.$http.post(`${d}/v2/api/${l}/cart`,{data:n}).then(u=>{console.log("加入購物車",u.data),this.getCarts(),this.getProducts(),alert("已預約課程")})},getCarts(){this.$http.get(`${d}/v2/api/${l}/cart`).then(e=>{console.log("購物車",e.data),this.products=e.data.products,this.cart=e.data.data}),this.getProducts()},updateCartItem(e){const o={product_id:e.product.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${d}/v2/api/${l}/cart/${e.id}`,{data:o}).then(n=>{console.log("更新購物車",n.data),this.getCarts(),this.loadingItem=""}),this.getProducts()},deleteItem(e){this.$http.delete(`${d}/v2/api/${l}/cart/${e.id}`).then(o=>{console.log("刪除購物車",o.data),this.getCarts()})},onSubmit(){console.log("有跳出onSubmit")},isPhone(e){return/^(09)[0-9]{8}$/.test(e)?!0:"需為正確的手機號碼格式"}},mounted(){this.getProducts(),this.getCarts()}},I={class:"container-fluid bg-black py-5"},x={class:"container"},y={class:"row"},C=t("h3",{class:"text-white text-center pb-10"},"已預約課程",-1),k={class:"col-12 col-sm-8 mx-auto"},w={class:"table align-middle"},V=t("thead",null,[t("tr",{class:"text-white"},[t("th",{class:"col-2"},"上課名稱"),t("th",{class:"col-1",style:{}},"堂數"),t("th",{class:"col-2"},"價格")])],-1),E={class:"text-white"},T={class:"input-group input-group-sm"},A=["onUpdate:modelValue","onChange","disabled"],S=["value"],D={class:"text-white d-flex justify-content-between"},R=["onClick","disabled"],N=t("i",{class:"fa-solid fa-trash"},null,-1),U=[N],q={class:"text-white"},B=t("td",{colspan:"2",class:"text-end"},"總計",-1);function L(e,o,n,u,c,p){return r(),i("main",null,[t("div",I,[t("div",x,[t("div",y,[C,t("div",k,[t("table",w,[V,t("tbody",null,[c.cart.carts?(r(!0),i(_,{key:0},g(c.cart.carts,s=>(r(),i("tr",{class:"tableDark",key:s.id},[t("td",E,h(s.product.title),1),t("td",null,[t("div",T,[v(t("select",{name:"",id:"",class:"form-control bg-black text-white","onUpdate:modelValue":a=>s.qty=a,onChange:a=>p.updateCartItem(s),disabled:s.id===c.loadingItem},[(r(),i(_,null,g(20,a=>t("option",{value:a,key:a+"123"},h(a),9,S)),64))],40,A),[[P,s.qty]])])]),t("td",D,[f(h(s.product.price)+" ",1),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>p.deleteItem(s),disabled:s.id===c.loadingItem},U,8,R)])]))),128)):m("",!0)]),t("tfoot",null,[t("tr",q,[B,t("td",null,h(c.cart.total),1)])])])])])])])])}const j=b($,[["render",L]]);export{j as default};
