import{_ as m,o as r,c as i,a as e,F as g,q as b,C as v,J as h,M as I,R as P,e as f,p as $,f as x}from"./index-36e314b9.js";const{VITE_APP_URL:d,VITE_APP_PATH:l}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"shangway",BASE_URL:"/basketball-sideProject/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},y={data(){return{products:[],productId:"",cart:{},cartItem:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getProducts(){this.$http.get(`${d}/v2/api/${l}/products/all`).then(t=>{console.log("產品列表",t.data.products),this.products=t.data.products})},openModal(t){this.productId=t,console.log("外層帶入 productId",t)},addToCard(t,o=1){const n={product_id:t,qty:o};this.$http.post(`${d}/v2/api/${l}/cart`,{data:n}).then(_=>{console.log("加入購物車",_.data),this.getCarts(),this.getProducts(),alert("已預約課程")})},getCarts(){this.$http.get(`${d}/v2/api/${l}/cart`).then(t=>{console.log("購物車",t.data),this.products=t.data.products,this.cart=t.data.data}),this.getProducts()},updateCartItem(t){const o={product_id:t.product.id,qty:t.qty};this.cartItem=t.id,this.$http.put(`${d}/v2/api/${l}/cart/${t.id}`,{data:o}).then(n=>{console.log("更新購物車",n.data),this.getCarts(),this.cartItem=""}),this.getProducts()},deleteItem(t){this.$http.delete(`${d}/v2/api/${l}/cart/${t.id}`).then(o=>{console.log("刪除購物車",o.data),this.getCarts()})},onSubmit(){console.log("有跳出onSubmit")},isPhone(t){return/^(09)[0-9]{8}$/.test(t)?!0:"需為正確的手機號碼格式"}},mounted(){this.getProducts(),this.getCarts()}},u=t=>($("data-v-94548605"),t=t(),x(),t),C={class:"container-fluid bg-black py-5"},w={class:"container"},V={class:"row"},k=u(()=>e("h3",{class:"text-white text-center pb-10"},"已預約課程",-1)),S={class:"col-12 col-sm-8 mx-auto"},E={class:"table align-middle"},R=u(()=>e("thead",null,[e("tr",{class:"text-white"},[e("th",{class:"col-2"},"上課名稱"),e("th",{class:"col-1",style:{}},"堂數"),e("th",{class:"col-2"},"價格")])],-1)),T={class:"text-white"},A={class:"input-group input-group-sm"},D=["onUpdate:modelValue","onChange","disabled"],q=["value"],N={class:"text-white d-flex justify-content-between"},U=["onClick","disabled"],B=u(()=>e("i",{class:"fa-solid fa-trash"},null,-1)),L=[B],M={class:"text-white"},j=u(()=>e("td",{colspan:"2",class:"text-end"},"總計",-1));function F(t,o,n,_,c,p){return r(),i("main",null,[e("div",C,[e("div",w,[e("div",V,[k,e("div",S,[e("table",E,[R,e("tbody",null,[c.cart.carts?(r(!0),i(g,{key:0},b(c.cart.carts,s=>(r(),i("tr",{class:"tableDark",key:s.id},[e("td",T,h(s.product.title),1),e("td",null,[e("div",A,[I(e("select",{name:"",id:"",class:"form-control bg-black text-white","onUpdate:modelValue":a=>s.qty=a,onChange:a=>p.updateCartItem(s),disabled:s.id===c.cartItem},[(r(),i(g,null,b(20,a=>e("option",{value:a,key:a+"123"},h(a),9,q)),64))],40,D),[[P,s.qty]])])]),e("td",N,[f(h(s.product.price)+" ",1),e("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>p.deleteItem(s),disabled:s.id===c.cartItem},L,8,U)])]))),128)):v("",!0)]),e("tfoot",null,[e("tr",M,[j,e("td",null,h(c.cart.total),1)])])])])])])])])}const O=m(y,[["render",F],["__scopeId","data-v-94548605"]]);export{O as default};
