import{_ as x,r as f,o as d,c as n,a as t,F as g,s as b,E as w,L as _,b as y,w as I,f as P,U as $,e as v,p as k,g as C}from"./index-478a0df6.js";const{VITE_APP_URL:l,VITE_APP_PATH:i}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"shangway",BASE_URL:"/basketball-sideProject/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},V={data(){return{products:[],productId:"",cart:{},cartItem:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getProducts(){this.$http.get(`${l}/v2/api/${i}/products/all`).then(e=>{this.products=e.data.products})},openModal(e){this.productId=e},addToCard(e,o=1){const h={product_id:e,qty:o};this.$http.post(`${l}/v2/api/${i}/cart`,{data:h}).then(p=>{console.log("加入購物車",p.data),this.getCarts(),this.getProducts(),alert("已預約課程")})},getCarts(){this.$http.get(`${l}/v2/api/${i}/cart`).then(e=>{this.products=e.data.products,this.cart=e.data.data}),this.getProducts()},updateCartItem(e){const o={product_id:e.product.id,qty:e.qty};this.cartItem=e.id,this.$http.put(`${l}/v2/api/${i}/cart/${e.id}`,{data:o}).then(h=>{console.log("更新購物車",h.data),this.getCarts(),this.cartItem=""}),this.getProducts()},deleteItem(e){this.$http.delete(`${l}/v2/api/${i}/cart/${e.id}`).then(o=>{console.log("刪除購物車",o.data),this.getCarts()})},isPhone(e){return/^(09)[0-9]{8}$/.test(e)?!0:"需為正確的手機號碼格式"}},mounted(){this.getProducts(),this.getCarts()}},r=e=>(k("data-v-68704804"),e=e(),C(),e),E={class:"bg-black"},R={key:0,class:"container-fluid py-5"},S={class:"container"},T={class:"row"},A=r(()=>t("h3",{class:"text-white text-center pb-10"},"已預約課程",-1)),L={class:"col-12 col-sm-8 mx-auto"},D={class:"table align-middle"},N=r(()=>t("thead",null,[t("tr",{class:"text-white"},[t("th",{class:"col-2"},"上課名稱"),t("th",{class:"col-1",style:{}},"堂數"),t("th",{class:"col-2"},"價格")])],-1)),U={class:"text-white"},q={class:"input-group input-group-sm"},B=["onUpdate:modelValue","onChange","disabled"],M=["value"],j={class:"text-white d-flex justify-content-between"},F=["onClick","disabled"],H=r(()=>t("i",{class:"fa-solid fa-trash"},null,-1)),O=[H],z={class:"text-white"},G=r(()=>t("td",{colspan:"2",class:"text-end"},"總計",-1)),J={key:1,class:"container py-10"},K={class:"row text-center"},Q={class:"col-12 text-center"},W=r(()=>t("p",{class:"text-white mb-3 fs-6"},"目前並無任何課程預約",-1)),X=r(()=>t("p",{class:"text-white fs-6"},"返回課程頁面",-1));function Y(e,o,h,p,c,u){const m=f("RouterLink");return d(),n("main",E,[c.cart.total>0?(d(),n("div",R,[t("div",S,[t("div",T,[A,t("div",L,[t("table",D,[N,t("tbody",null,[c.cart.carts?(d(!0),n(g,{key:0},b(c.cart.carts,s=>(d(),n("tr",{class:"tableDark",key:s.id},[t("td",U,_(s.product.title),1),t("td",null,[t("div",q,[P(t("select",{name:"",id:"",class:"form-control bg-black text-white","onUpdate:modelValue":a=>s.qty=a,onChange:a=>u.updateCartItem(s),disabled:s.id===c.cartItem},[(d(),n(g,null,b(20,a=>t("option",{value:a,key:a+"123"},_(a),9,M)),64))],40,B),[[$,s.qty]])])]),t("td",j,[v(_(s.product.price)+" ",1),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>u.deleteItem(s),disabled:s.id===c.cartItem},O,8,F)])]))),128)):w("",!0)]),t("tfoot",null,[t("tr",z,[G,t("td",null,_(c.cart.total),1)])])])])])])])):(d(),n("div",J,[t("div",K,[t("div",Q,[W,X,y(m,{to:"/products",class:"text bg-white fs-1 px-1 border border-1 rounded-3 text-decoration-none"},{default:I(()=>[v("預約上課")]),_:1})])])]))])}const tt=x(V,[["render",Y],["__scopeId","data-v-68704804"]]);export{tt as default};
