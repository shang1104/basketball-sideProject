import{_ as C,r as v,b as P,o as c,a as d,d as t,F as g,e as x,f as I,t as r,g as a,w as V,n as $,h as w,v as q,i as E,j as _}from"./index-44c198af.js";const{VITE_APP_URL:p,VITE_APP_PATH:m}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"shangway",BASE_URL:"/basketball-sideProject/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},A={data(){return{products:[],productId:"",cart:{},loadingItem:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getProducts(){this.$http.get(`${p}/v2/api/${m}/products/all`).then(s=>{console.log("產品列表",s.data.products),this.products=s.data.products})},openModal(s){this.productId=s,console.log("外層帶入 productId",s)},addToCard(s,o=1){const b={product_id:s,qty:o};this.$http.post(`${p}/v2/api/${m}/cart`,{data:b}).then(f=>{console.log("加入購物車",f.data),this.getCarts(),this.getProducts(),alert("已預約課程")})},getCarts(){this.$http.get(`${p}/v2/api/${m}/cart`).then(s=>{console.log("購物車",s.data),this.products=s.data.products,this.cart=s.data.data}),this.getProducts()},updateCartItem(s){const o={product_id:s.product.id,qty:s.qty};this.loadingItem=s.id,this.$http.put(`${p}/v2/api/${m}/cart/${s.id}`,{data:o}).then(b=>{console.log("更新購物車",b.data),this.getCarts(),this.loadingItem=""}),this.getProducts()},deleteItem(s){this.$http.delete(`${p}/v2/api/${m}/cart/${s.id}`).then(o=>{console.log("刪除購物車",o.data),this.getCarts()})},onSubmit(){console.log("有跳出onSubmit")},isPhone(s){return/^(09)[0-9]{8}$/.test(s)?!0:"需為正確的手機號碼格式"}},mounted(){this.getProducts(),this.getCarts()}},T={class:"container-fluid bg-black py-5"},D={class:"container"},S={class:"row"},F=t("h3",{class:"text-white text-center pb-10"},"所有課程",-1),M={class:"table"},N=t("thead",{class:"text-white"},[t("tr",{class:"text-center bg-primary"},[t("th",{class:"col-2"},"圖片"),t("th",{class:"col-3"},"上課名稱"),t("th",{class:"col-1 text-nowrap"},"堂數"),t("th",{class:"col-1"},"價格"),t("th",{class:"col-1 text-nowrap"},"查看細節"),t("th",{class:"col-1 text-nowrap"},"加入課程")])],-1),U={class:"text-white"},R={class:"align-middle"},j={class:"align-middle"},B={class:"align-middle"},L={class:"align-middle"},z=["onClick"],H={class:"align-middle"},O=["onClick"],G={class:"container-fluid bg-black py-5"},J={class:"container"},K={class:"row"},Q=t("h3",{class:"text-white text-center pb-10"},"已預約課程",-1),W={class:"col-12 mx-auto"},X={class:"table align-middle"},Y=t("thead",null,[t("tr",{class:"text-white bg-primary"},[t("th",{class:"col-1"}),t("th",{class:"col-2"},"上課名稱"),t("th",{class:"col-1",style:{}},"堂數"),t("th",{class:"col-2"},"價格")])],-1),Z=t("td",null,null,-1),tt={class:"text-white"},et={class:"input-group input-group-sm"},st=["onUpdate:modelValue","onChange","disabled"],at=["value"],lt={class:"text-white d-flex justify-content-between"},ot=["onClick","disabled"],it=t("i",{class:"fa-solid fa-trash"},null,-1),nt=[it],ct={class:"text-white"},dt=t("td",{colspan:"3",class:"text-end"},"總計",-1),rt={class:"container-fulid bg-black py-5"},_t={class:"container"},ht={class:"row"},ut=t("h3",{class:"text-white text-center pb-9"},"報名表單",-1),pt={class:"col-sm-8 col-lg-6 col-xl-4 mx-auto"},mt={class:"form-floating text-white mb-6"},bt=t("label",{for:"name",class:"text-white me-5"},"姓名",-1),gt={class:"form-floating text-white mb-6"},vt=t("label",{for:"age",class:"text-white me-5"},"年齡",-1),xt={class:"form-floating text-white mb-6"},ft=t("label",{for:"sex",class:"text-white me-5"},"性別",-1),wt=t("span",{class:"me-3",value:"man"},"男性",-1),yt=t("input",{class:"me-9",type:"radio",name:"性別",id:"man"},null,-1),kt=t("span",{class:"me-3",value:"male"},"女性",-1),Ct=t("input",{class:"me-9",type:"radio",name:"性別",id:"male"},null,-1),Pt={class:"form-floating text-white mb-6"},It=t("label",{for:"group",class:"text-white me-5"},"個人/團體",-1),Vt=t("span",{class:"me-3",value:"single"},"個人",-1),$t=t("input",{class:"me-9",type:"radio",name:"個人/團體",id:"single"},null,-1),qt=t("span",{class:"me-3",value:"group"},"團體",-1),Et=t("input",{class:"me-9",type:"radio",name:"個人/團體",id:"group"},null,-1),At={class:"form-floating text-white mb-6"},Tt=t("label",{for:"level",class:"text-white me-5"},"組別",-1),Dt={name:"組別",id:"組別"},St=t("option",{value:""},"請選擇組別",-1),Ft=t("option",{value:"高中"},"高中",-1),Mt=t("option",{value:"國中"},"國中",-1),Nt=t("option",{value:"國小"},"國小",-1),Ut=[St,Ft,Mt,Nt],Rt={class:"form-floating text-white mb-6"},jt=t("label",{for:"tel",class:"text-white me-5"},"請輸入電話",-1),Bt={class:"form-floating text-white mb-6"},Lt=t("label",{for:"email",class:"text-white me-5"},"請輸入信箱",-1),zt=t("div",{class:"d-flex justify-content-center mt-5"},[t("button",{type:"submit",class:"btn btn-warning text-white"}," 送出報名表單 ")],-1);function Ht(s,o,b,f,h,u){const i=v("VField"),n=v("ErrorMessage"),y=v("VForm"),k=P("validate");return c(),d(g,null,[t("main",null,[t("div",T,[t("div",D,[t("div",S,[F,t("table",M,[N,t("tbody",U,[(c(!0),d(g,null,x(h.products,e=>(c(),d("tr",{class:"text-center tableDark",key:e.id},[t("th",null,[t("div",{style:$([{height:"100px","background-size":"contain","background-repeat":"no-repeat","background-position":"center"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)]),t("td",R,r(e.title),1),t("td",j,r(e.unit),1),t("td",B,r(e.price),1),t("td",L,[t("button",{onClick:l=>u.openModal(e.id),type:"button",class:"btn btn-primary text-white text-nowrap me-2"},"查看更多",8,z)]),t("td",H,[t("button",{onClick:l=>u.addToCard(e.id),type:"button",class:"btn btn-pink text-white text-nowrap"},"加入課程",8,O)])]))),128))])])])])])]),t("main",null,[t("div",G,[t("div",J,[t("div",K,[Q,t("div",W,[t("table",X,[Y,t("tbody",null,[h.cart.carts?(c(!0),d(g,{key:0},x(h.cart.carts,e=>(c(),d("tr",{class:"tableDark",key:e.id},[Z,t("td",tt,r(e.product.title),1),t("td",null,[t("div",et,[w(t("select",{name:"",id:"",class:"form-control bg-black text-white","onUpdate:modelValue":l=>e.qty=l,onChange:l=>u.updateCartItem(e),disabled:e.id===h.loadingItem},[(c(),d(g,null,x(20,l=>t("option",{value:l,key:l+"123"},r(l),9,at)),64))],40,st),[[q,e.qty]])])]),t("td",lt,[E(r(e.product.price)+" ",1),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:l=>u.deleteItem(e),disabled:e.id===h.loadingItem},nt,8,ot)])]))),128)):I("",!0)]),t("tfoot",null,[t("tr",ct,[dt,t("td",null,r(h.cart.total),1)])])])])])])])]),t("main",null,[t("div",rt,[t("div",_t,[t("div",ht,[ut,t("div",pt,[a(y,{class:"form-signin position-relative text-center"},{default:V(({errors:e})=>[t("div",mt,[bt,a(i,{id:"name",name:"姓名",type:"text",rules:"required",class:_(["text-black",{"is-invalid":e.姓名}]),placeholder:"請輸入姓名"},null,8,["class"]),a(n,{name:"姓名",class:"invalid-feedback"})]),t("div",gt,[vt,a(i,{id:"age",name:"年齡",type:"number",rules:"required",class:_(["text-black",{"is-invalid":e.年齡}]),placeholder:"請輸入年齡"},null,8,["class"]),a(n,{name:"年齡",class:"invalid-feedback"})]),t("div",xt,[ft,a(i,{id:"sex",name:"性別",type:"radio",rules:"required",class:_(["text-black",{"is-invalid":e.性別}]),placeholder:"請選擇性別",as:"radio"},null,8,["class"]),wt,yt,kt,Ct,a(n,{name:"sex",class:"invalid-feedback"})]),t("div",Pt,[It,a(i,{id:"group",name:"個人/團體",type:"radio",rules:"required",class:_(["text-black",{"is-invalid":e.個人團體}]),placeholder:"請選擇個人或團體",as:"radio"},null,8,["class"]),Vt,$t,qt,Et,a(n,{name:"個人/團體",class:"invalid-feedback"})]),t("div",At,[Tt,a(i,{id:"level",name:"組別",rules:"required",class:_(["text-black d-none",{"is-invalid":e.組別}]),placeholder:"請選擇組別",as:"select"},null,8,["class"]),w((c(),d("select",Dt,Ut)),[[k,"included:高中,國中,國小"]]),a(n,{name:"分類",class:"invalid-feedback"})]),t("div",Rt,[jt,a(i,{id:"tel",name:"電話",type:"text",rules:u.isPhone,class:_(["text-black",{"is-invalid":e.電話}]),placeholder:"請輸入電話"},null,8,["rules","class"]),a(n,{name:"電話",class:"invalid-feedback"})]),t("div",Bt,[Lt,a(i,{id:"email",name:"信箱",type:"text",rules:"required|email",class:_(["text-black",{"is-invalid":e.信箱}]),placeholder:"請輸入信箱"},null,8,["class"]),a(n,{name:"信箱",class:"invalid-feedback"})]),zt]),_:1})])])])])])],64)}const Gt=C(A,[["render",Ht]]);export{Gt as default};
